<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fenglei.mapper.prd.PrdCuttingRawMapper">

    <select id="listByPid" resultType="com.fenglei.model.prd.entity.PrdCuttingRaw">
        select pcr.id,
               pcr.pid,
               pcr.seq,
               pcr.material_detail_id,
               pcr.parent_sku_id,
               pcr.numerator,
               pcr.denominator,
               pcr.theory_qty,
               pcr.real_qty,
               pcr.real_pi_qty,
               pcr.use_waste,
               bmd.color_id,
               bmd.specification_id,
               bmc.color,
               bms.specification,
               bmd.pid   as product_id,
               bm.name   as productName,
               bm.number as productNum,
               sf.url    as mainPic,
               bu.name   as unitName
        from prd_cutting_raw pcr
                 left join bd_material_detail bmd on pcr.material_detail_id = bmd.id
                 left join bd_material bm on bmd.pid = bm.id
                 left join bd_material_color bmc on bmd.color_id = bmc.id
                 left join bd_material_specification bms on bmd.specification_id = bms.id
                 left join sys_files sf on bm.main_pic_id = sf.id
                 left join bd_unit bu on bm.unit_id = bu.id
        where pcr.pid = #{pid}
    </select>
</mapper>
